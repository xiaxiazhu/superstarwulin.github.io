<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>前端插件的攻防和数据的保护-武林</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/default.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', use the PDF print sheet -->
		<script>
			document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h3>前端插件的攻防和数据的保护</h3>
					<p>
						<small>Created by <a href="http://superstarwulin.github.io">武林</a> </small>
					</p>
				</section>

				<section>
					<h2>插件对页面的干扰和破坏</h2>
					<ul>
						<li>来做数据破坏-- 评价的评价返利</li>
						<li>导流这样的功能-- 详情的流量分流导购</li>
						<li>接口的拦截</li>
						<li>...</li>
					</ul>

					<aside class="notes">
						如果网站做到一定的级别，例如天猫各各页面有大量的页面访问，这个时候由于利益的驱使，可能会存在专门的针对我们页面的插件（主要是chrome和firefox插件）来做数据破坏（例如：天猫评价的评价返利），导流这样的功能（例如：天猫详情的流量分流导购）。
					</aside>
				</section>
				<section data-markdown>
					<script type="text/template">
					<h2>场景1</h2>
> 现金奖励广告评价
![](http://gtms02.alicdn.com/tps/i2/TB1Is_NGVXXXXarXXXXULohOpXX-505-447.png)
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
					<h2>场景2</h2>
> 详情的分流
![](https://img.alicdn.com/tps/TB1vPgLKFXXXXa2XFXXXXXXXXXX-1280-651.png)
					</script>
				</section>


				<section data-markdown>
					<script type="text/template">
### 防止插件干扰的方案1

快速销毁机制：顾名思义，销毁dom的机制。要求是快速发布，譬如：在detai需要绕开缓存立即生效传送配置到签到销毁机制中进行donm销毁。


						
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
### 防止插件干扰的方案2

外部链接的监控：通过拿到链接访问地址的域名列表，监控不属于本站的链接域名情况。
譬如：通过codetrack的监控不属于本域名的域名，来统计访问量最大的几个外部域名，访问量大代表影响大。而往往插件中会有外部图片这样的链接，这样就可以通过域名的统计信息来重现场景，统计插件种类，达到销毁的目的。

						
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
### 防止插件干扰的方案3

https接口的升级可以使得数据报文加密，数据被劫持且篡改也无意义。

						
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
### 防止插件干扰的方案4

通过定义`Content Security Policy`的白名单来做访问限制。Content Security Policy 这个规范与内容安全有关，主要是用来定义页面可以加载哪些资源，减少XSS的发生。详见[Content Security Policy 介绍](https://imququ.com/post/content-security-policy-reference.html)。对外部链接的资源访问做限制，也可以使得插件无法工作。


						
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
### 防止插件干扰的方案5


![](http://gtms02.alicdn.com/tps/i2/TB1CKhtHFXXXXa5XFXXTpzWTpXX-1164-688.png)

###### 使用webcomponent定义区域功能为html标签，来做区域的保护，从而保护数据的入口不被任意插入数据。详见：[天猫评价的广告插件](http://www.atatech.org/articles/32995)
						
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
### 终极方案6

使用突变监听，来阻止第三方对系统的更改。

1. 部件划分： a.本系统代码 ,b.防止篡改系统。
2. a中通过规划代码白盒确定系统内dom结构初始化完成的js执行结点，再初始化b来做防篡改监听。
3. 在MutationObserver实例中的addedNodes、removedNodes 回调中获取被增删的结点。
4. 通过dom的增删来处理对页面的篡改。
						
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
## 总结
前端的插件的安全问题往往被忽略，因为那是用户环境，用户以及操作系统和浏览器有更高的权限决定是否使用这样特定的功能。而网站本身的利益就受到了损害，以上对针对插件的攻防措施可以很大程度上对网站以及网站使用者的数据和相关的利益链起到保护作用。						
					</script>
				</section>
				<section>


								<section data-markdown>
					<script type="text/template">
## 谢谢
					</script>
				</section>
					

				</section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
