<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>web 兼容性小结 | 武林的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="虽然我们正忙着走向下一个时代，但是大型的面向消费人群的网站依赖需要做兼容，因为还有较为庞大的用户比例。如百度流量研究院给出的数据：如图：pc流量占比情况：
移动流量占比情况：

天猫已经全量引导用户升级到ie8及以上版本，如果不希望投入资源做兼容可以参考。
但是，但是，我依然对浏览器历史留下的问题提供一些解决方法，见：
IE6-bugs注意: html文件夹中有对应bug重现的html页面
最近发">
<meta property="og:type" content="article">
<meta property="og:title" content="web 兼容性小结">
<meta property="og:url" content="superstarwulin.github.io/2016/05/03/webcompatibility/index.html">
<meta property="og:site_name" content="武林的博客">
<meta property="og:description" content="虽然我们正忙着走向下一个时代，但是大型的面向消费人群的网站依赖需要做兼容，因为还有较为庞大的用户比例。如百度流量研究院给出的数据：如图：pc流量占比情况：
移动流量占比情况：

天猫已经全量引导用户升级到ie8及以上版本，如果不希望投入资源做兼容可以参考。
但是，但是，我依然对浏览器历史留下的问题提供一些解决方法，见：
IE6-bugs注意: html文件夹中有对应bug重现的html页面
最近发">
<meta property="og:image" content="https://gw.alicdn.com/tps/TB1rdyqJFXXXXaHXFXXXXXXXXXX-804-666.png_480x480.jpg">
<meta property="og:image" content="https://img.alicdn.com/tps/TB18dqmJFXXXXckXFXXXXXXXXXX-730-880.jpg_480x480.jpg">
<meta property="og:updated_time" content="2016-09-25T03:31:12.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="web 兼容性小结">
<meta name="twitter:description" content="虽然我们正忙着走向下一个时代，但是大型的面向消费人群的网站依赖需要做兼容，因为还有较为庞大的用户比例。如百度流量研究院给出的数据：如图：pc流量占比情况：
移动流量占比情况：

天猫已经全量引导用户升级到ie8及以上版本，如果不希望投入资源做兼容可以参考。
但是，但是，我依然对浏览器历史留下的问题提供一些解决方法，见：
IE6-bugs注意: html文件夹中有对应bug重现的html页面
最近发">
<meta name="twitter:image" content="https://gw.alicdn.com/tps/TB1rdyqJFXXXXaHXFXXXXXXXXXX-804-666.png_480x480.jpg">
  
    <link rel="alternative" href="/atom.xml" title="武林的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
  <script src="http://libs.baidu.com/jquery/1.9.0/jquery.js"></script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img lazy-src="http://gtms01.alicdn.com/tps/i1/TB1x_.vHVXXXXXvXVXX2YSA3pXX-540-960.jpg_180x180xz.jpg" class="js-avatar">
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">leo(武林)</a></h1>
		</hgroup>

		
		<p class="header-subtitle">技术自由，耕耘点滴</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
							<li><a href="/photo/">相册</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/superstarwulin" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/2434748684/profile?topnav=1&wvr=6" title="weibo">weibo</a>
					        
								<a class="mail" target="_blank" href="/wulin.zwl@taobao.com" title="mail">mail</a>
					        
								<a class="linkedin" target="_blank" href="https://www.linkedin.com/in/zhuwulin" title="linkedin">linkedin</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/JavaScript/" style="font-size: 16.67px;">JavaScript</a> <a href="/tags/browserify/" style="font-size: 10px;">browserify</a> <a href="/tags/css3/" style="font-size: 10px;">css3</a> <a href="/tags/es6/" style="font-size: 10px;">es6</a> <a href="/tags/git-extras/" style="font-size: 10px;">git extras</a> <a href="/tags/reactnative/" style="font-size: 10px;">reactnative</a> <a href="/tags/sketch/" style="font-size: 10px;">sketch</a> <a href="/tags/webpack/" style="font-size: 13.33px;">webpack</a> <a href="/tags/weex/" style="font-size: 10px;">weex</a> <a href="/tags/兼容性/" style="font-size: 10px;">兼容性</a> <a href="/tags/基础/" style="font-size: 20px;">基础</a> <a href="/tags/工具/" style="font-size: 13.33px;">工具</a> <a href="/tags/微架构/" style="font-size: 13.33px;">微架构</a>
					</div>
				</section>
				
				
				

				
				
				<section class="switch-part switch-part3">
				
					<div id="js-aboutme">朱武林，2013年毕业于华南理工大学电子与信息学院，获得硕士学位。曾就职于百度hao123团队，现就职于阿里巴巴天猫前端团队，花名五零；geek精神，技术自由。</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">leo(武林)</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="http://gtms01.alicdn.com/tps/i1/TB1x_.vHVXXXXXvXVXX2YSA3pXX-540-960.jpg_180x180xz.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">leo(武林)</h1>
			</hgroup>
			
			<p class="header-subtitle">技术自由，耕耘点滴</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/photo/">相册</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/superstarwulin" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/2434748684/profile?topnav=1&wvr=6" title="weibo">weibo</a>
			        
						<a class="mail" target="_blank" href="/wulin.zwl@taobao.com" title="mail">mail</a>
			        
						<a class="linkedin" target="_blank" href="https://www.linkedin.com/in/zhuwulin" title="linkedin">linkedin</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-webcompatibility" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/03/webcompatibility/" class="article-date">
  	<time datetime="2016-05-03T08:29:16.000Z" itemprop="datePublished">2016-05-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      web 兼容性小结
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/兼容性/">兼容性</a></li></ul>
	</div>

        
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/兼容/">兼容</a>
	</div>


        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>虽然我们正忙着走向下一个时代，但是大型的面向消费人群的网站依赖需要做兼容，因为还有较为庞大的用户比例。如<a href="http://tongji.baidu.com/data/browser" target="_blank" rel="external">百度流量研究院</a>给出的数据：如图：<br>pc流量占比情况：<br><img src="https://gw.alicdn.com/tps/TB1rdyqJFXXXXaHXFXXXXXXXXXX-804-666.png_480x480.jpg" alt=""></p>
<p>移动流量占比情况：</p>
<p><img src="https://img.alicdn.com/tps/TB18dqmJFXXXXckXFXXXXXXXXXX-730-880.jpg_480x480.jpg" alt=""></p>
<p>天猫已经全量引导用户升级到ie8及以上版本，如果不希望投入资源做兼容可以参考。</p>
<p>但是，但是，我依然对浏览器历史留下的问题提供一些解决方法，见：</p>
<h1 id="IE6-bugs"><a href="#IE6-bugs" class="headerlink" title="IE6-bugs"></a>IE6-bugs</h1><p>注意: html文件夹中有对应bug重现的html页面</p>
<p>最近发现项目方向越来越不对了，干脆用来放置浏览器的兼容性内容吧！</p>
<h3 id="CSS兼容性或bug"><a href="#CSS兼容性或bug" class="headerlink" title="CSS兼容性或bug"></a>CSS兼容性或bug</h3><h4 id="1"><a href="#1" class="headerlink" title="1."></a>1.</h4><p>计算一定要精确 不要让内容的宽高超出我们设置的宽高<br>在IE6下，内容会撑开设置好的宽高</p>
<h4 id="2"><a href="#2" class="headerlink" title="2."></a>2.</h4><p>在IE6元素浮动，如果宽度需要内容撑开，就给里边的块元素都加浮动</p>
<h4 id="3"><a href="#3" class="headerlink" title="3."></a>3.</h4><p>在IE6，7下元素要通过浮动并在同一行，就给这行元素都加浮动</p>
<h4 id="4"><a href="#4" class="headerlink" title="4."></a>4.</h4><p>P标签中不要嵌套块元素</p>
<h4 id="5"><a href="#5" class="headerlink" title="5."></a>5.</h4><p>IE6下最小高度问题<br>在IE6下元素的高度的小于19px的时候，会被当做19px来处理</p>
<p>解决办法:overflow:hidden;</p>
<h4 id="6"><a href="#6" class="headerlink" title="6."></a>6.</h4><p>1px dotted 在IE6下不支持 ，因为精度计算的问题，会显示成虚线，2px或大于2px的dotted就可以正常显示  </p>
<p>解决办法:切背景平铺</p>
<h4 id="7"><a href="#7" class="headerlink" title="7."></a>7.</h4><p>标准浏览器 解决子元素margin传递到父元素的bug </p>
<p>解决方法: </p>
<p>1.加float  </p>
<p>2.overflow:hidden IE6下需要出发haslayout</p>
<p>在IE6下解决margin传递要触发haslayout</p>
<p>(如果有边框margin就不会传递到父元素上<br>在IE6下父级有边框的时候，子元素的margin值消失<br>解决办法:触发父级的haslayout ）</p>
<h4 id="8"><a href="#8" class="headerlink" title="8."></a>8.</h4><p>IE6下双边距BUG<br>在IE6，块元素有浮动和和横向的margin值 ，横向的margin值会被放大成两倍</p>
<p>解决办法: display:inline;</p>
<h4 id="9"><a href="#9" class="headerlink" title="9."></a>9.</h4><p>基于上面的bug</p>
<p>如果有一排浮动元素：</p>
<p>margin-right 一行右侧第一个元素有双边距</p>
<p>margin-left 一行左侧第一个元素有双边距</p>
<h4 id="10"><a href="#10" class="headerlink" title="10."></a>10.</h4><p>在IE6，7下，li本身没浮动，但是li的内容有浮动，li下边就会产生一个间隙</p>
<p>解决办法:</p>
<p>1.给li加浮动</p>
<p>2.给li加vertical-align</p>
<h4 id="11"><a href="#11" class="headerlink" title="11."></a>11.</h4><p>在IE6，7下，li本身没浮动，但是li的内容有浮动，li下边就会产生一个间隙 4px</p>
<p>解决办法:</p>
<p>1.给li加浮动</p>
<p>2.给li加vertical-align</p>
<p>当IE6下最小高度问题，和 li的间隙问题共存的时候 给li加浮动</p>
<p>解决方法: 先解决最小高度 overflow:hidden; 在加float处理li间隙</p>
<h4 id="12"><a href="#12" class="headerlink" title="12."></a>12.</h4><p>当一行子元素占有的宽度之和和父级的宽度相差超过3px, 或者有不满行状态的时候,最后一行子元素的下margin在IE6下就会失效</p>
<h4 id="13"><a href="#13" class="headerlink" title="13."></a>13.</h4><p>在IE6下的文字溢出BUG<br>子元素的宽度和父级的宽度相差小于3px的时候,两个浮动元素中间有注释或者内嵌元素</p>
<p>解决办法:用div把注释或者内嵌元素用div包起来 </p>
<h4 id="14"><a href="#14" class="headerlink" title="14."></a>14.</h4><p>当浮动元素和绝对定位元素是并列关系的时候，在IE6下绝对定位元素会消失</p>
<p>解决办法: 给定位元素外面包个div</p>
<h4 id="15"><a href="#15" class="headerlink" title="15."></a>15.</h4><p>在IE6，7下，子元素有相对定位的话，父级的overflow包不住子元素</p>
<p>解决办法: 给父级也加相对定位</p>
<h4 id="16"><a href="#16" class="headerlink" title="16."></a>16.</h4><p>在IE6下绝对定位元素的父级宽高是奇数的时候，元素的right值和bottom值会有1px的偏差</p>
<p>解决方法: 不要给父元素设置奇数宽高</p>
<h4 id="17"><a href="#17" class="headerlink" title="17."></a>17.</h4><p>IE6下 不支持fixed定位方法，</p>
<p>解决方法: 通过js定位的方式</p>
<h4 id="18"><a href="#18" class="headerlink" title="18."></a>18.</h4><p>IE6下就不要给tr和tbody同时加背景样式</p>
<h4 id="19"><a href="#19" class="headerlink" title="19."></a>19.</h4><p>在IE6，7下输入类型的表单控件上下各有1px的间隙</p>
<p>解决办法: 给input加浮动</p>
<h4 id="20"><a href="#20" class="headerlink" title="20."></a>20.</h4><p>在IE6，7下输入类型的表单控件加border:none;</p>
<p>解决办法: 重置input的背景</p>
<h4 id="21"><a href="#21" class="headerlink" title="21."></a>21.</h4><p>在IE6，7下输入类型的表单控件输入文字的时候，背景图片会跟着一块移动</p>
<p>解决办法: 把背景加给父级</p>
<h4 id="22"><a href="#22" class="headerlink" title="22."></a>22.</h4><p>IE6不支持png24图片</p>
<p>解决方法：</p>
<p>1.使用js （<a href="http://dillerdesign.com/experiment/DD_belatedPNG/DD_belatedPNG_0.0.8a.js）" target="_blank" rel="external">http://dillerdesign.com/experiment/DD_belatedPNG/DD_belatedPNG_0.0.8a.js）</a></p>
<p>2.使用filter</p>
<h4 id="23："><a href="#23：" class="headerlink" title="23："></a>23：</h4><p>在IE6下 在important 后边在家一条同样的样式，会破坏掉important的作用，会按照默认的优先级顺序来走</p>
<h4 id="24"><a href="#24" class="headerlink" title="24:"></a>24:</h4><p>IE6,7,8下，不加docType的话，页面盒模型出现怪异模式</p>
<h3 id="DOM中的兼容性或bug"><a href="#DOM中的兼容性或bug" class="headerlink" title="DOM中的兼容性或bug"></a>DOM中的兼容性或bug</h3><h4 id="25"><a href="#25" class="headerlink" title="25:"></a>25:</h4><p>childNodes 在标准浏览器中包含了文本（注意：换行会被解析成文本）和元素类型的节点，非标准的IE6,7,8下，只包含元素节点。</p>
<p>解决方法：</p>
<p>使用children属性替代childNodes， 只取元素节点</p>
<h4 id="26："><a href="#26：" class="headerlink" title="26："></a>26：</h4><p>IE6,7,8不支持 firstElementChild, lastElementChild， nextElementSibling， previousElementSibling and parentElement</p>
<p>解决方法:</p>
<p>兼容写法 ofirst = ele.firstElementChild || firstChild, 但是这种写法会在下面的HTML结构情况（换行在标准浏览器下解析 成文本元素）下出问题</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">html</div><div class="line"><span class="comment">&lt;!--注意下面ul中有换行 上面的方法在标准浏览器会拿到文本节点--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure>
<p>处理方法：</p>
<p>ele.children[0]</p>
<h4 id="27："><a href="#27：" class="headerlink" title="27："></a>27：</h4><p>offsetParent 返回元素已定位的最近父级元素, 如果元素的所有父级元素都没有定位，则返回body</p>
<p>在IE6,7中会存在两种特殊情况：</p>
<ul>
<li>如果当前元素没有定位默认是body，如果有定位则是html</li>
<li>如果当前元素的某个父级触发了hasLayout，那么offsetParent就会被指向到这个触发了hasLayout特性的父节点上</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">javascript</div><div class="line">ele<span class="selector-class">.currentStyle</span><span class="selector-class">.hasLayout</span></div></pre></td></tr></table></figure>
<h4 id="28"><a href="#28" class="headerlink" title="28:"></a>28:</h4><p>HTML结构对dom的影响 例如：<br><figure class="highlight apache"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">html</span></div><div class="line"><span class="section">&lt;ul&gt;</span></div><div class="line"> <span class="section">&lt;li&gt;</span><span class="section">&lt;/li&gt;</span></div><div class="line"> <span class="section">&lt;li&gt;</span><span class="section">&lt;/li&gt;</span></div><div class="line"> <span class="section">&lt;li&gt;</span><span class="section">&lt;/li&gt;</span></div><div class="line"> <span class="section">&lt;li&gt;</span><span class="section">&lt;/li&gt;</span></div><div class="line"> <span class="section">&lt;p&gt;</span><span class="section">&lt;/p&gt;</span></div><div class="line"><span class="section">&lt;/ul&gt;</span></div></pre></td></tr></table></figure></p>
<p>上面的结构在IE6 7会将p元素解析成最后一个li元素的子元素，所以必须编写符合规范的HTML结构</p>
<h4 id="29"><a href="#29" class="headerlink" title="29:"></a>29:</h4><p>元素.offsetLeft[Top] :</p>
<p>只读 属性 当前元素到定位父级的距离（偏移值）</p>
<p>到当前元素的offsetParent的距离</p>
<ul>
<li><p>如果没有定位父级</p>
<ul>
<li>offsetParent -&gt; body</li>
<li>offsetLeft -&gt; html</li>
</ul>
</li>
<li><p>如果有定位父级</p>
<ul>
<li>ie7以下：<pre><code>* 如果自己没有定位，那么offsetLeft[Top]是到body的距离
* 如果自己有定位，那么就是到定位父级的距离
</code></pre></li>
<li>其他：到定位父级的距离</li>
</ul>
</li>
</ul>
<h4 id="30"><a href="#30" class="headerlink" title="30:"></a>30:</h4><p>正常情况下是没有问题的：</p>
<ul>
<li>style.width : 样式宽</li>
<li>clientWidth : 可视区宽 (样式宽 + padding) 注意滚动条情况下</li>
<li>offsetWidth : 占位宽 (样式宽 + padding + border  可视区宽 + 边框)</li>
</ul>
<p>怪异盒模型（未测试）</p>
<h4 id="31"><a href="#31" class="headerlink" title="31:"></a>31:</h4><p>body.offsetLeft or body.offsetTop</p>
<ul>
<li>标准浏览器  0</li>
<li>IE6,7 body的margin值</li>
</ul>
<h4 id="32"><a href="#32" class="headerlink" title="32:"></a>32:</h4><p>标准浏览器支持 getElementsByClassName 方法<br>非标准浏览器不支持该方法</p>
<h4 id="33"><a href="#33" class="headerlink" title="33:"></a>33:</h4><p>创建一个table: 兼容写法<br>注意运用: </p>
<ul>
<li>insertRow and insertCell</li>
<li>tBodies, tHead, tFoot, rows and cells</li>
</ul>
<p>解决方法：参见对应HTML页面</p>
<h4 id="34"><a href="#34" class="headerlink" title="34:"></a>34:</h4><p>onchange事件，触发时机</p>
<ul>
<li>text文本输入框:  当光标离开元素的时候再去判断值是否发生了变化，如果发生了变化则触发onchange事件</li>
<li>radio/checkbox: <ul>
<li>标准下，点击，值如果改变就触发onchange事件</li>
<li>非标准下， 点击，并且焦点离开时，如果值发生改变，触发onchange事件</li>
</ul>
</li>
</ul>
<h3 id="BOM中的兼容性或bug"><a href="#BOM中的兼容性或bug" class="headerlink" title="BOM中的兼容性或bug"></a>BOM中的兼容性或bug</h3><h4 id="35"><a href="#35" class="headerlink" title="35:"></a>35:</h4><p>window.close()</p>
<ul>
<li>Firefox 无法关闭</li>
<li>Chrome 立即关闭</li>
<li>IE 询问是否关闭</li>
</ul>
<p>注意: window.open() 不存在兼容问题, 该方法返回打开新窗口的window对象</p>
<h4 id="36："><a href="#36：" class="headerlink" title="36："></a>36：</h4><p>可视区大小：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">document</span>.documentElement.clientWidth</div><div class="line"><span class="built_in">document</span>.documentElement.clientHeight</div></pre></td></tr></table></figure></p>
<p>滚动距离：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">document</span>.documentElement.scrollTop/scrollLeft <span class="comment">//在chrome下这个值始终为0</span></div><div class="line"><span class="built_in">document</span>.body.scrollTop/scrollLeft</div></pre></td></tr></table></figure></p>
<p>兼容写法:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> scrollTop = <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop;</div></pre></td></tr></table></figure></p>
<p>内容高:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//下面在body margin为0情况下是一样的</span></div><div class="line"><span class="built_in">document</span>.body.scrollHeight</div><div class="line"><span class="built_in">document</span>.document.scrollHeight</div></pre></td></tr></table></figure></p>
<p>文档高度：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">document</span>.body.offsetHeight <span class="comment">//所以推荐使用body.offsetHeight</span></div><div class="line"><span class="built_in">document</span>.documentElement.offsetHeight <span class="comment">//IE下不兼容，始终显示可视高度</span></div></pre></td></tr></table></figure></p>
<h3 id="Event-中的兼容性或bug"><a href="#Event-中的兼容性或bug" class="headerlink" title="Event 中的兼容性或bug"></a>Event 中的兼容性或bug</h3><h4 id="37"><a href="#37" class="headerlink" title="37:"></a>37:</h4><p>event对象</p>
<ul>
<li>ie/chrome : event是一个内置全局对象</li>
<li>标准下 : 事件对象是通过事件函数的第一个参数传入</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">obj.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">evt</span>) </span>&#123;</div><div class="line">    <span class="comment">//兼容写法</span></div><div class="line">    <span class="keyword">var</span> e = evt || <span class="built_in">window</span>.event;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="38"><a href="#38" class="headerlink" title="38:"></a>38:</h4><p>注册事件:</p>
<ul>
<li>非标准ie：obj.attachEvent(事件名称，事件函数);<ul>
<li>没有捕获</li>
<li>事件名称有on</li>
<li>事件函数执行的顺序：标准ie -&gt;正序   非标准ie -&gt;倒序</li>
<li>this指向window</li>
</ul>
</li>
<li>标准：obj.addEventListener(事件名称，事件函数，是否捕获);<ul>
<li>有捕获</li>
<li>事件名称没有on</li>
<li>事件执行的顺序是正序</li>
<li>this触发该事件的对象</li>
</ul>
</li>
</ul>
<p>兼容写法:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">bind</span>(<span class="params">obj, eventName, fn</span>)</span>&#123;</div><div class="line">    <span class="keyword">if</span> (obj.addEventListener) &#123;</div><div class="line">        obj.addEventListener(eventName, fn, <span class="literal">false</span>);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        obj.attachEvent(<span class="string">"on"</span>+eventName, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            fn.call(obj);</div><div class="line">        &#125;); </div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="39"><a href="#39" class="headerlink" title="39:"></a>39:</h4><p>事件捕获</p>
<p>非标准ie不支持捕获<br>标准ie和标准浏览器addEventListener(eventName, fn, isCapture)</p>
<p>isCapture: false -&gt; 冒泡 true -&gt; 捕获</p>
<h4 id="40"><a href="#40" class="headerlink" title="40:"></a>40:</h4><p>事件取消</p>
<ul>
<li>IE: detachEvent(‘on’ + eventName, fn);</li>
<li>标准: removeEventListener(eventName, fn, isCapture);</li>
</ul>
<p>兼容写法<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">unBind</span>(<span class="params">obj, eventName, fn</span>)</span>&#123;</div><div class="line">    <span class="keyword">if</span>(obj.removeEventListener)&#123;</div><div class="line">        obj.removeEventListener(eventName, fn, <span class="literal">false</span>);</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">        obj.detachEvent(<span class="string">'on'</span> + eventName, fn);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="41"><a href="#41" class="headerlink" title="41:"></a>41:</h4><p>全局捕获</p>
<p>设置全局捕获 ，当我们给一个元素设置全局捕获以后，<br>那么这个元素就会监听后续发生的所有事件，<br>当有事件发生的时候，就会被当前设置了全局捕获的元素所触发</p>
<ul>
<li>IE : 有，并且有效果</li>
<li>FF : 有，但是没效果</li>
<li>Chrome : 没有</li>
</ul>
<h4 id="42"><a href="#42" class="headerlink" title="42:"></a>42:</h4><p>getComputedStyle(object, false)</p>
<p>非标准IE,没有该方法，但是有object.currentStyle方法<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getStyle</span>(<span class="params">object, attr</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> object.currentStyle ? object.currentStyle[attr] : getComputedStyle(object, <span class="literal">false</span>)[attr]; </div><div class="line">&#125;</div><div class="line"></div><div class="line">getStyle(<span class="built_in">document</span>.body, <span class="string">"width"</span>);</div></pre></td></tr></table></figure></p>
<h4 id="43"><a href="#43" class="headerlink" title="43:"></a>43:</h4><p>onmouseenter 和 onmouseleave 方法<br>IE下独有的事件，后来Chrome和Firefox加入该事件，用于处理onmouseover 和 onmouseout，子元素影响父元素问题</p>
<h4 id="参考资料："><a href="#参考资料：" class="headerlink" title="参考资料："></a>参考资料：</h4><p><a href="http://w3help.org/zh-cn/causes/index.html" target="_blank" rel="external">http://w3help.org/zh-cn/causes/index.html</a><br><a href="http://blog.163.com/hongshaoguoguo@126/blog/static/18046981201461824757380" target="_blank" rel="external">http://blog.163.com/hongshaoguoguo@126/blog/static/18046981201461824757380</a></p>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/05/03/正则表达式/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          正则表达式收集
        
      </div>
    </a>
  
  
    <a href="/2016/05/03/一些问题收集/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">基础学习</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">分享到：</span>
		<a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
		<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>



<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="webcompatibility" data-title="web 兼容性小结" data-url="superstarwulin.github.io/2016/05/03/webcompatibility/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"true"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>



</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 leo(武林)
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/mobile.js"></script>
<script src="/js/main.js"></script>





<! -- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  </div>
</body>
</html>